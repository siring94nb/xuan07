<?php
header("content-Type: text/html; charset=UTF-8");
set_time_limit(0);
ignore_user_abort(true);
$aurl ='http://p2bwp6sww.bkt.clouddn.com/';
$images = [
'fangchan/art1.jpg',
'fangchan/art2.jpg',
'fangchan/art3.jpg',
'fangchan/art4.jpg',
'fangchan/nav1.png',
'fangchan/nav2.png',
'fangchan/nav3.png',
'fangchan/nav4.png',
'fangchan/nav5.png',
'fangchan/nav6.png',
'fangchan/nav7.png',
'fangchan/nav8.png',
'fangchan/slide1.jpg',
'fangchan/slide2.jpg',
'fangchan/tabbar1.png',
'fangchan/tabbar1_h.png',
'fangchan/tabbar2.png',
'fangchan/tabbar2_h.png',
'fangchan/tabbar3.png',
'huadian/cat1.jpg',
'huadian/cat10.jpg',
'huadian/cat11.jpg',
'huadian/cat12.jpg',
'huadian/cat2.jpg',
'huadian/cat3.jpg',
'huadian/cat4.jpg',
'huadian/cat5.jpg',
'huadian/cat6.jpg',
'huadian/cat7.jpg',
'huadian/cat8.jpg',
'huadian/cat9.jpg',
'huadian/logo.jpg',
'huadian/logo_bg.jpg',
'huadian/pro1.jpg',
'huadian/pro2.jpg',
'huadian/slide1.jpg',
'huadian/slide2.jpg',
'huadian/slide3.jpg',
'huadian/tabbar1.jpg',
'huadian/tabbar2.jpg',
'huadian/tabbar3.jpg',
'hunsha/a1.jpg',
'hunsha/a2.jpg',
'hunsha/a3.jpg',
'hunsha/bg.jpg',
'hunsha/bg_s.jpg',
'hunsha/c1.jpg',
'hunsha/c2.jpg',
'hunsha/c3.jpg',
'hunsha/c4.jpg',
'hunsha/c5.jpg',
'hunsha/c6.jpg',
'hunsha/case1.jpg',
'hunsha/case2.jpg',
'hunsha/case3.jpg',
'hunsha/case4.jpg',
'hunsha/case5.jpg',
'hunsha/case6.jpg',
'hunsha/case7.jpg',
'hunsha/case8.jpg',
'hunsha/case_con1.jpg',
'hunsha/case_con2.jpg',
'hunsha/case_con3.jpg',
'hunsha/case_con4.jpg',
'hunsha/case_con5.jpg',
'hunsha/logo.jpg',
'hunsha/nav1.png',
'hunsha/nav2.png',
'hunsha/nav3.png',
'hunsha/nav4.png',
'hunsha/slide1.jpg',
'hunsha/slide2.jpg',
'hunsha/slide3.jpg',
'hunsha/tabbar1.png',
'hunsha/tabbar2.png',
'hunsha/tabbar3.png',
'hunsha/tabbar4.png',
'hunsha/tabbar5.png',
'hunsha/tabbar6.png',
'jiaju/kaipin.png',
'jiaju/nav1.png',
'jiaju/nav2.png',
'jiaju/nav3.png',
'jiaju/nav4.png',
'jiaju/nav5.png',
'jiaju/nav6.png',
'jiaju/nav7.png',
'jiaju/nav8.png',
'jiaju/pro1.jpg',
'jiaju/pro2.jpg',
'jiaju/pro3.jpg',
'jiaju/pro4.jpg',
'jiaju/pro5.jpg',
'jiaju/slide1.jpg',
'jiaju/slide2.jpg',
'jiaju/tabbar1.png',
'jiaju/tabbar2.png',
'jiaju/tabbar3.png',
'jiaju/tabbar4.png',
'jiaju/tanchuang.jpg',
'jshs/nav1.png',
'jshs/nav2.png',
'jshs/nav3.png',
'jshs/nav4.png',
'jshs/pic1.png',
'jshs/pic2.png',
'jshs/pic3.png',
'jshs/pic4.png',
'jshs/pic5.png',
'jshs/pic6.png',
'jshs/pro1.jpg',
'jshs/pro2.jpg',
'jshs/pro3.jpg',
'jshs/pro4.jpg',
'jshs/pro5.jpg',
'jshs/server_bg.jpg',
'jshs/slide1.jpg',
'jshs/slide2.jpg',
'jshs/tabbar1.png',
'jshs/tabbar2.png',
'jshs/tabbar3.png',
'lvxingshe/logo.jpg',
'lvxingshe/logo_bg.jpg',
'lvxingshe/nav1.png',
'lvxingshe/nav2.png',
'lvxingshe/nav3.png',
'lvxingshe/nav4.png',
'lvxingshe/nav5.png',
'lvxingshe/pro1.jpg',
'lvxingshe/pro10.jpg',
'lvxingshe/pro10_slide1.jpg',
'lvxingshe/pro10_slide2.jpg',
'lvxingshe/pro2.jpg',
'lvxingshe/pro2_slide1.jpg',
'lvxingshe/pro2_slide2.jpg',
'lvxingshe/pro3.jpg',
'lvxingshe/pro3_slide1.jpg',
'lvxingshe/pro3_slide2.jpg',
'lvxingshe/pro4.jpg',
'lvxingshe/pro4_slide1.jpg',
'lvxingshe/pro4_slide2.jpg',
'lvxingshe/pro4_slide3.jpg',
'lvxingshe/pro5.jpg',
'lvxingshe/pro5_slide1.jpg',
'lvxingshe/pro5_slide2.jpg',
'lvxingshe/pro5_slide3.jpg',
'lvxingshe/pro6.jpg',
'lvxingshe/pro6_slide1.jpg',
'lvxingshe/pro6_slide2.jpg',
'lvxingshe/pro6_slide3.jpg',
'lvxingshe/pro7.jpg',
'lvxingshe/pro7_slide1.jpg',
'lvxingshe/pro7_slide2.jpg',
'lvxingshe/pro8.jpg',
'lvxingshe/pro8_slide2.jpg',
'lvxingshe/pro8_slide3.jpg',
'lvxingshe/pro9.jpg',
'lvxingshe/slide1.jpg',
'lvxingshe/tabbar1.png',
'lvxingshe/tabbar1_h.png',
'lvxingshe/tabbar2.png',
'lvxingshe/tabbar2_h.png',
'lvxingshe/tabbar3.png',
'lvxingshe/tabbar4.png',
'lvxingshe/tabbar5.png',
'lvxingshe/tabbar5_h.png',
'peixun/art1.jpg',
'peixun/art2.jpg',
'peixun/art3.jpg',
'peixun/art4.jpg',
'peixun/logo.png',
'peixun/logo_bg.jpg',
'peixun/nav1.png',
'peixun/nav2.png',
'peixun/nav3.png',
'peixun/nav4.png',
'peixun/pic1.png',
'peixun/pic1_p1.png',
'peixun/pic2.png',
'peixun/pic2_p1.png',
'peixun/pic3.png',
'peixun/pic3_p1.png',
'peixun/pro1.png',
'peixun/pro2.jpg',
'peixun/pro2_slide1.jpg',
'peixun/pro2_slide2.jpg',
'peixun/slide1.jpg',
'peixun/slide2.jpg',
'peixun/slide3.jpg',
'peixun/tabbar1.png',
'peixun/tabbar2.png',
'peixun/tabbar3.png',
'peixun/tabbar4.png',
'peixun/tabbar5.png',
'pigefanxin/art1.jpg',
'pigefanxin/art10.jpg',
'pigefanxin/art11.jpg',
'pigefanxin/art12.jpg',
'pigefanxin/art13.jpg',
'pigefanxin/art14.jpg',
'pigefanxin/art15.jpg',
'pigefanxin/art16.jpg',
'pigefanxin/art17.jpg',
'pigefanxin/art18.jpg',
'pigefanxin/art19.jpg',
'pigefanxin/art2.jpg',
'pigefanxin/art3.jpg',
'pigefanxin/art4.jpg',
'pigefanxin/art5.jpg',
'pigefanxin/art6.jpg',
'pigefanxin/art7.jpg',
'pigefanxin/art8.jpg',
'pigefanxin/column1.jpg',
'pigefanxin/column2.jpg',
'pigefanxin/column3.jpg',
'pigefanxin/column4.jpg',
'pigefanxin/logo.jpg',
'pigefanxin/logo_bg.jpg',
'pigefanxin/nav1.png',
'pigefanxin/nav2.png',
'pigefanxin/nav3.png',
'pigefanxin/nav4.png',
'pigefanxin/pro1.jpg',
'pigefanxin/pro_a1_z1.jpg',
'pigefanxin/pro_a1_z2.jpg',
'pigefanxin/slide.jpg',
'pigefanxin/slide1.jpg',
'pigefanxin/slide2.jpg',
'pigefanxin/tabbar1.png',
'pigefanxin/tabbar2.png',
'pigefanxin/tabbar3.png',
'pigefanxin/tabbar4.png',
'pigefanxin/tabbar5.png',
'qiche/logo.png',
'qiche/logo_bg.jpg',
'qiche/nav1.png',
'qiche/nav2.png',
'qiche/nav3.png',
'qiche/nav4.png',
'qiche/page1.jpg',
'qiche/page2.jpg',
'qiche/pro1.jpg',
'qiche/pro2.jpg',
'qiche/pro3.jpg',
'qiche/pro4.jpg',
'qiche/server.jpg',
'qiche/slide1.jpg',
'qiche/slide2.jpg',
'qiche/slide3.jpg',
'qiche/tabbar1.png',
'qiche/tabbar2.png',
'qiche/tabbar3.png',
'qiche/tabbar4.png',
'qiche/video.jpg',
'qixiu/art1.jpg',
'qixiu/art2.jpg',
'qixiu/logo_bg.jpg',
'qixiu/nav1.png',
'qixiu/nav2.png',
'qixiu/nav3.png',
'qixiu/nav4.png',
'qixiu/pro1.jpg',
'qixiu/pro2.jpg',
'qixiu/slide1.jpg',
'qixiu/tabbar1.png',
'qixiu/tabbar1_h.png',
'qixiu/tabbar2.png',
'qixiu/tabbar2_h.png',
'qixiu/tabbar3.png',
'qixiu/tabbar4.png',
'qixiu/tabbar5.png',
't_pigefanxin.jpg',
'zxzs/logo.png',
'zxzs/logo_bg.png',
'zxzs/nav1.png',
'zxzs/nav2.png',
'zxzs/nav3.png',
'zxzs/nav4.png',
'zxzs/nav5.png',
'zxzs/pic1.jpg',
'zxzs/pic2.jpg',
'zxzs/pic3.jpg',
'zxzs/pic4.jpg',
'zxzs/pic5.jpg',
'zxzs/pic6.jpg',
'zxzs/pic7.jpg',
'zxzs/pic8.jpg',
'zxzs/pro1.jpg',
'zxzs/pro2.jpg',
'zxzs/pro3.jpg',
'zxzs/pro4.jpg',
'zxzs/server_bg.png',
'zxzs/slide1.png',
'zxzs/slide2.png',
'zxzs/slide3.png',
'zxzs/tabbar1.png',
'zxzs/tabbar2.png',
'zxzs/tabbar3.png',
];


class Spider {
public function downloadImage($url){
	$ch = curl_init();
	curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
	curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
	curl_setopt($ch, CURLOPT_URL, $url);
	curl_setopt($ch, CURLOPT_REFERER, 'http://www.rthk.hk/');
	curl_setopt($ch, CURLOPT_HTTPHEADER,array('X-FORWARDED-FOR:220.181.108.91','CLIENT-IP:220.181.108.91'));
	curl_setopt($ch, CURLOPT_USERAGENT,'Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.rthk.hk/)');
	curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
	curl_setopt($ch, CURLOPT_HEADER, 0);
	curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
	curl_setopt($ch, CURLOPT_TIMEOUT,120);
	$filet = curl_exec($ch);
	curl_close($ch);
	$this->saveAsImage($url, $filet);
}

private function saveAsImage($url, $file){
	$cl=$url;
	$urlz = parse_url($url);
	$urlz=$urlz['scheme'].'://'.$urlz['host'].'/';
	$bl2=$urlz;
	$lengh1=strlen($bl2);
	$lengh2=strlen($cl);
	$ccl2 = substr($cl,$lengh1,$lengh2);
	$final1 = str_replace('\\','/',$ccl2);
	$edc='./assetsj/'.dirname($final1).'/';
	if(!is_dir($edc))
	mkdir($edc,0777,true);
	$path = "./".$edc;
	$filename = pathinfo($url, PATHINFO_BASENAME);
	$pf = $path . $filename;
	file_put_contents($pf, $file);
  }
}
$spider = new Spider();
foreach ( $images as $url ) {
  $spider->downloadImage($aurl.$url);
}
header("refresh:5;url=./".basename(__FILE__));
?>